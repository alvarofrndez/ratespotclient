const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SpinnerComponent-V4KrvbC6.js","assets/index-Bq31n-Mt.js","assets/index-BjoBKk9p.css","assets/SpinnerComponent-ZaL62qN0.css"])))=>i.map(i=>d[i]);
import{_ as f,i as k,z as y,j as w,A as C,r as S,f as l,c as h,a as P,b as v,u as c,d as F,e as M,F as I,g as T,h as E}from"./index-Bq31n-Mt.js";import{m as b}from"./map-CnsWXG82.js";import{m as B}from"./modal-DwSi58_8.js";import{s as A,u as V}from"./spot-eIHvAh2J.js";const x={__name:"MapComponent",props:["selected_place"],setup(i){const p=T(()=>E(()=>import("./SpinnerComponent-V4KrvbC6.js"),__vite__mapDeps([0,1,2,3]))),e=b(),m=B(),d=A();V();const s=k(null);function g(){return new Promise((o,a)=>{if(window.google&&window.google.maps){o();return}const t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDeRHdaxcBP2Q92YlAwJ3VnYBCq0jGlTpw&libraries=places",t.async=!0,t.defer=!0,t.onload=o,t.onerror=a,document.head.appendChild(t)})}async function u(o){s.value&&window.google&&window.google.maps&&o&&(e.map=new google.maps.Map(s.value,{center:{lat:o.lat,lng:o.lng},zoom:15,disableDefaultUI:!0,keyboardShortcuts:!1}),e.user_marker=new google.maps.Marker({position:{lat:o.lat,lng:o.lng},map:e.map,title:"Tú estás aquí",icon:{path:google.maps.SymbolPath.CIRCLE,scale:8,fillColor:"#4285F4",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2}}),e.initPlaceService(),e.map.addListener("click",a=>{if(a.stop(),!a.placeId)return;const t={placeId:a.placeId,fields:["name","formatted_address","rating","place_id","geometry","types","photos"]};e.place_service.getDetails(t,(r,n)=>{n===google.maps.places.PlacesServiceStatus.OK?(r.types=d.filterSpotTypes(r.types),r.types&&m.openModal("NewSpot",r)):console.error("Error al obtener los detalles del lugar:",n)})}),e.startTracking())}function _(){e.user_marker.getPosition().lat()!=e.map.getCenter().lat()&&e.user_marker.getPosition().lng()!=e.map.getCenter().lng()&&e.startTracking(),e.map.setCenter(e.user_marker.getPosition()),e.map.setZoom(15)}return y(()=>i.selected_place,o=>{o&&(e.stopTracking(),e.map.setCenter(o.geometry.location),e.map.setZoom(20))}),w(async()=>{try{const o=await e.getUserLocation();o&&(await g(),u(o))}catch(o){console.error("Error al cargar Google Maps:",o)}}),C(()=>{e.stopTracking()}),(o,a)=>{const t=S("icon");return l(),h(I,null,[P(t,{name:"co-reload",class:"set-on-user-position",onClick:_}),v("div",{ref_key:"map_element",ref:s,id:"map"},null,512),c(e).map?M("",!0):(l(),F(c(p),{key:0}))],64)}}},U=f(x,[["__scopeId","data-v-9472d4a6"]]);export{U as default};
