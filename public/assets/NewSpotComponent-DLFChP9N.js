import{m as S}from"./modal-Bt6is9Iy.js";import{s as C}from"./spot-4GoCOM8x.js";import{u as x}from"./user-WJktJhRJ.js";import{_ as M,m as N,i as p,j as B,r as b,f as e,c as n,b as i,e as r,u as o,t as l,a as h,d as g}from"./index-C1sxwVN5.js";const P={key:0,class:"photo-container"},U=["src","width","height"],V={class:"container-principal-info"},j={key:0},A={key:1},D={key:1},E={key:2,class:"container-rate"},H={__name:"NewSpotComponent",setup(I){const a=S(),u=C(),m=x(),f=N(),d=p(null),_=p(!1);B(async()=>{a.data.photos.length>0&&(d.value=w(a.data.photos[0])),_.value=u.isAlreadySaved(m.user.group_id+"-"+a.data.place_id)});async function v(t){t.stopPropagation(),await u.newSpot(a.data.place_id,a.data.name,a.data.geometry.location.lat(),a.data.geometry.location.lng(),a.data.formatted_address)&&a.closeModal()}async function k(t){t.stopPropagation(),await u.deleteSpot(a.data.place_id)&&(console.log("deleted"),a.closeModal())}function y(){_.value&&(f.push("/spots/"+m.user.group_id+"-"+a.data.place_id),a.closeModal())}function w(t){if(t.width>75||t.height>75){const s=Math.max(t.width,t.height)/75;return{getUrl:()=>t.getUrl({maxWidth:t.width/s,maxHeight:t.height/s}),width:t.width/s,height:t.height/s}}}return(t,s)=>{const c=b("icon");return e(),n("div",{class:"container-data",onClick:y},[d.value?(e(),n("div",P,[i("img",{src:d.value.getUrl(),width:d.value.width,height:d.value.height,alt:"photo"},null,8,U)])):r("",!0),i("div",V,[o(a).data.name?(e(),n("p",j,l(o(a).data.name),1)):r("",!0),o(a).data.formatted_address?(e(),n("div",A,[h(c,{name:"md-locationon-sharp",scale:".85"}),i("span",null,l(o(a).data.formatted_address),1)])):r("",!0)]),o(a).data.types.length>0?(e(),n("div",D,[i("span",null,l(o(a).data.types.join(", ")),1)])):r("",!0),o(a).data.rating?(e(),n("div",E,[h(c,{name:"hi-star",scale:".85"}),i("span",null,l(o(a).data.rating),1)])):r("",!0),_.value?(e(),g(c,{key:4,class:"add-icon",onClick:k,name:"md-bookmarkadded-round"})):(e(),g(c,{key:3,class:"add-icon",onClick:v,name:"md-bookmarkadd-outlined"}))])}}},z=M(H,[["__scopeId","data-v-a16f22f6"]]);export{z as default};
