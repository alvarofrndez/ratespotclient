import{m as C}from"./modal-DwSi58_8.js";import{s as x,u as M}from"./spot-eIHvAh2J.js";import{_ as N,p as B,i as g,j as b,r as P,f as e,c as n,b as l,e as c,u as o,t as _,a as f,d as w}from"./index-Bq31n-Mt.js";import{t as U}from"./toast-BRWjhjtu.js";const V={key:0,class:"photo-container"},j=["src","width","height"],G={class:"container-principal-info"},A={key:0},D={key:1},E={key:1},H={key:2,class:"container-rate"},I={__name:"NewSpotComponent",setup(R){const a=C(),d=x(),r=M(),m=B(),u=U(),i=g(null),h=g(!1);b(async()=>{a.data.photos.length>0&&(i.value=S(a.data.photos[0])),h.value=d.isAlreadySaved(r.user.group_id+"-"+a.data.place_id)});async function v(t){t.stopPropagation(),await d.newSpot(a.data.place_id,a.data.name,a.data.geometry.location.lat(),a.data.geometry.location.lng(),a.data.formatted_address)?(a.closeModal(),u.show("lugar guardado","success"),m.push("/spots/"+r.user.group_id+"-"+a.data.place_id),await d.getGroupSpots(r.user.group_id)):u.show("error al guardar el lugar","error")}async function k(t){t.stopPropagation(),await d.deleteSpot(r.user.group_id+"-"+a.data.place_id)?(a.closeModal(),u.show("lugar eliminado","success"),await d.getGroupSpots(r.user.group_id)):u.show("error al eliminar el lugar","error")}function y(){h.value&&(m.push("/spots/"+r.user.group_id+"-"+a.data.place_id),a.closeModal())}function S(t){if(t.width>75||t.height>75){const s=Math.max(t.width,t.height)/75;return{getUrl:()=>t.getUrl({maxWidth:t.width/s,maxHeight:t.height/s}),width:t.width/s,height:t.height/s}}}return(t,s)=>{const p=P("icon");return e(),n("div",{class:"container-data",onClick:y},[i.value?(e(),n("div",V,[l("img",{src:i.value.getUrl(),width:i.value.width,height:i.value.height,alt:"photo"},null,8,j)])):c("",!0),l("div",G,[o(a).data.name?(e(),n("p",A,_(o(a).data.name),1)):c("",!0),o(a).data.formatted_address?(e(),n("div",D,[f(p,{name:"md-locationon-sharp",scale:".85"}),l("span",null,_(o(a).data.formatted_address),1)])):c("",!0)]),o(a).data.types.length>0?(e(),n("div",E,[l("span",null,_(o(a).data.types.join(", ")),1)])):c("",!0),o(a).data.rating?(e(),n("div",H,[f(p,{name:"hi-star",scale:".85"}),l("span",null,_(o(a).data.rating),1)])):c("",!0),h.value?(e(),w(p,{key:4,class:"add-icon",onClick:k,name:"md-bookmarkadded-round"})):(e(),w(p,{key:3,class:"add-icon",onClick:v,name:"md-bookmarkadd-outlined"}))])}}},F=N(I,[["__scopeId","data-v-425ff252"]]);export{F as default};
