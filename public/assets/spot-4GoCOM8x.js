import{z as b,i as R}from"./index-C1sxwVN5.js";import{u as j,a as P}from"./user-WJktJhRJ.js";const o=j(),s=P(),L=b("spot",()=>{const r=R(null);async function u(e,t,n,a,w){const i=await fetch(s.API_URL+"/spots/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,name:t,lat:n,lng:a,address:w,user:o.user})});return i.ok?await i.json():!1}async function f(e){const t=await fetch(s.API_URL+"/spots/"+e);if(!t.ok)return!1;const n=await t.json();r.value=n}async function c(e){const t=await fetch(s.API_URL+"/spot/"+e);return t.ok?await t.json():!1}async function d(e,t){const n=await fetch(s.API_URL+"/spot-rate/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({spot_id:e,rate:t,user_id:o.user.id})});return n.ok?await n.json():!1}async function p(e,t){const n=await fetch(s.API_URL+"/spot-rate/edit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({spot_id:e,rate:t,user_id:o.user.id})});return n.ok?await n.json():!1}async function l(e){return!!(await fetch(s.API_URL+"/spot/"+e,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok}function y(e){const t=["restaurant","bar","cafe","food","lodging","point_of_interest","establishment"];if(e.some(n=>t.includes(n))){const n=e.filter(a=>t.includes(a));return m(n)}return!1}function m(e){const t={restaurant:"Restaurante",bar:"Bar",cafe:"Café",food:"Comida",lodging:"Alojamiento",point_of_interest:"Punto de interés",establishment:"Establecimiento"};return e.map(n=>t[n])}function _(e){return r.value.some(t=>t.id===e)}function g(e){let t=0,n=0;for(let a of e.rates)t+=parseFloat(a.rate);return n=t/e.rates.length,isNaN(n)?"0/0":n+"/10"}function h(e){const t=new Date(e);return`${t.getDate()}-${t.getMonth()+1}-${t.getFullYear()}`}function S(e){const t=e.rates.find(n=>n.user_id===o.user.id);return t?Number.isInteger(parseFloat(t.rate))?parseInt(t.rate)+"/10":t.rate+"/10":"0"}return{spots:r,newSpot:u,getGroupSpots:f,getSpotById:c,addRate:d,editRate:p,deleteSpot:l,filterSpotTypes:y,isAlreadySaved:_,getSpotRateMedia:g,convertDate:h,getUserSpotRate:S}});export{L as s};
